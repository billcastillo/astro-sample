<script>
import confetti from "canvas-confetti";

const duration = 2 * 1000;
const animationEnd = Date.now() + duration;
let skew = 1;

function randomInRange(min, max) {
  return Math.random() * (max - min) + min;
}

(function frame() {
  const timeLeft = animationEnd - Date.now();
  const ticks = Math.max(200, 300 * (timeLeft / duration));
  skew = Math.max(0.8, skew - 0.001);

  confetti({
    particleCount: 1,
    startVelocity: 0,
    ticks: ticks,
    origin: {
      x: Math.random(),
      // since particles fall down, skew start toward the top
      y: Math.random() * skew - 0.2,
    },
    colors: ["#FF0000"],
    shapes: ["circle"],
    gravity: randomInRange(0.4, 0.6),
    scalar: randomInRange(0.4, 1),
    drift: randomInRange(-0.4, 0.4),
  });

  requestAnimationFrame(frame);
})();
</script>

<div class='absolute inset-0 w-full h-full bir-canvas'></div>
<button class="relative my-16 p-4 start-confetti z-100">Button</button>
<script
  src='https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/libs/confetti.browser.min.js'
></script>
